"use strict";(self.webpackChunkdesafio_final_front=self.webpackChunkdesafio_final_front||[]).push([[893],{8893:(S,f,s)=>{s.r(f),s.d(f,{PrivateAppModule:()=>w});var u=s(6895),a=s(6773),t=s(8256),d=s(4766),g=s(529);let P=(()=>{class e{constructor(o){this.http=o}getProductsOnCartById(){return this.http.get(`${d.N.urlFetch}/api/carrito/1/productos`)}addProductsOnCartById(o){return this.http.post(`${d.N.urlFetch}/api/carrito/1/productos`,o)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(g.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),l=(()=>{class e{constructor(o){this.http=o}getProducts(){return this.http.get(`${d.N.urlFetch}/api/productos`)}deleteProduct(o){return this.http.delete(`${d.N.urlFetch}/api/productos/${o}`)}addProduct(o){return this.http.post(`${d.N.urlFetch}/api/productos/`,o)}updateProduct(o,n){return this.http.put(`${d.N.urlFetch}/api/productos/${o}`,n)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(g.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function _(e,i){if(1&e&&(t.TgZ(0,"div",6)(1,"div",7),t._uU(2),t.qZA(),t.TgZ(3,"div",8)(4,"blockquote",9)(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"footer",10),t._uU(8),t.TgZ(9,"cite",11),t._uU(10),t.qZA()()()()()),2&e){const o=i.$implicit;t.xp6(2),t.hij(" ",o.nombre," "),t.xp6(4),t.Oqu(o.descripcion),t.xp6(2),t.hij("Stock: ",o.stock," "),t.xp6(2),t.hij("Precio: ",o.precio,"")}}function C(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"li",12),t._uU(1),t.TgZ(2,"button",13),t.NdJ("click",function(){const p=t.CHM(o).$implicit,m=t.oxw();return t.KtG(m.addtocart(p.id))}),t._uU(3,"Agregar al carro"),t.qZA()()}if(2&e){const o=i.$implicit;t.xp6(1),t.hij("",o.nombre," ")}}let v=(()=>{class e{constructor(o,n,c){this.cartSVC=o,this.productsSVC=n,this.router=c,this.cartItems=[],this.listProducts=[]}ngOnInit(){this.cartSVC.getProductsOnCartById().subscribe({next:o=>this.cartItems=o,error:o=>console.log(o)}),this.productsSVC.getProducts().subscribe({next:o=>this.listProducts=o,error:o=>console.log(o)})}goCart(){this.router.navigate(["home"])}addtocart(o){this.productsSVC.getProducts().subscribe({next:n=>{this.cartItems.push(n.find(c=>c.id===o)),this.cartSVC.addProductsOnCartById(n.find(c=>c.id===o)).subscribe({next:c=>console.log(c),error:c=>console.log(c)})},error:n=>console.log(n)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(P),t.Y36(l),t.Y36(a.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["front-cart-page"]],decls:12,vars:2,consts:[[1,"container","mt-5"],["class","card",4,"ngFor","ngForOf"],[1,"btn","btn-danger","my-5",3,"click"],[1,"card",2,"width","30rem"],[1,"list-group","list-group-flush"],["class","list-group-item d-flex justify-content-evenly",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"blockquote","mb-0"],[1,"blockquote-footer"],["title","Source Title"],[1,"list-group-item","d-flex","justify-content-evenly"],[1,"btn","btn-primary",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0)(1,"h3"),t._uU(2,"Carrito"),t.qZA(),t.YNc(3,_,11,4,"div",1),t.TgZ(4,"button",2),t.NdJ("click",function(){return n.goCart()}),t._uU(5,"Ir al home"),t.qZA()(),t.TgZ(6,"div",0)(7,"h3"),t._uU(8,"Productos disponibles"),t.qZA(),t.TgZ(9,"div",3)(10,"ul",4),t.YNc(11,C,4,1,"li",5),t.qZA()()()),2&o&&(t.xp6(3),t.Q6J("ngForOf",n.cartItems),t.xp6(8),t.Q6J("ngForOf",n.listProducts))},dependencies:[u.sg]}),e})();var h=s(6221),b=s(1437),Z=s(7316),r=s(433);function T(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",2)(1,"button",9),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.deleteItem())}),t._uU(2,"Eliminar"),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.updateItem())}),t._uU(4,"Actualizar"),t.qZA()()}}function k(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div")(1,"form",11),t._UZ(2,"input",12)(3,"input",13)(4,"input",14)(5,"input",15)(6,"input",16)(7,"input",17),t.TgZ(8,"input",18),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.update())}),t.qZA()()()}if(2&e){const o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.formProduct)}}let x=(()=>{class e{constructor(o){this.dataProductsSvs=o,this.formProduct=new r.cw({}),this.updateProduct=!1}ngOnInit(){this.formProduct=new r.cw({nombre:new r.NI("",[r.kI.required]),descripcion:new r.NI("",[r.kI.required]),codigo:new r.NI("",[r.kI.required]),foto:new r.NI("",[r.kI.required]),precio:new r.NI("",[r.kI.required]),stock:new r.NI("",[r.kI.required])})}deleteItem(){this.dataProductsSvs.deleteProduct(this.infoProduct.id).subscribe({next:o=>console.log(o),error:o=>console.log(o)})}updateItem(){this.updateProduct=!0}update(){this.formProduct.get("nombre")?.errors?.required||this.formProduct.get("descripcion")?.errors?.required||this.formProduct.get("codigo")?.errors?.required||this.formProduct.get("foto")?.errors?.required||this.formProduct.get("precio")?.errors?.required||this.formProduct.get("stock")?.errors?.required?(alert("Todos los campos deben estar completos"),this.updateProduct=!1):(this.dataProductsSvs.updateProduct(this.infoProduct.id,this.formProduct.value).subscribe({next:o=>console.log(o),error:o=>console.log(o)}),this.updateProduct=!1)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l))},e.\u0275cmp=t.Xpm({type:e,selectors:[["front-card"]],inputs:{infoProduct:"infoProduct",administrador:"administrador"},decls:14,vars:7,consts:[[1,"card","m-3",2,"width","15rem"],[1,"card-img-top",2,"max-height","150px",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"list-group","list-group-flush"],[1,"list-group-item"],["class","card-body",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-warning","ms-3",3,"click"],["action","",1,"container","d-flex","flex-column",3,"formGroup"],["formControlName","nombre","placeholder","Nombre del producto","type","text"],["formControlName","descripcion","placeholder","descricti\xf3n del producto","type","text"],["formControlName","codigo","placeholder","C\xf3digo del producto","type","number"],["formControlName","foto","placeholder","URL de la foto","type","text"],["formControlName","precio","placeholder","Precio","type","number"],["formControlName","stock","placeholder","Stock","type","number"],["type","button","value","Enviar",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.TgZ(2,"div",2)(3,"h5",3),t._uU(4),t.qZA(),t.TgZ(5,"p",4),t._uU(6),t.qZA()(),t.TgZ(7,"ul",5)(8,"li",6),t._uU(9),t.qZA(),t.TgZ(10,"li",6),t._uU(11),t.qZA()(),t.YNc(12,T,5,0,"div",7),t.YNc(13,k,9,1,"div",8),t.qZA()),2&o&&(t.xp6(1),t.s9C("src",n.infoProduct.foto,t.LSH),t.xp6(3),t.Oqu(n.infoProduct.nombre),t.xp6(2),t.Oqu(n.infoProduct.descripcion),t.xp6(3),t.hij("Precio: U$S ",n.infoProduct.precio,""),t.xp6(2),t.hij("Stock: ",n.infoProduct.stock,""),t.xp6(1),t.Q6J("ngIf",n.administrador),t.xp6(1),t.Q6J("ngIf",n.updateProduct))},dependencies:[r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,u.O5],styles:["input[_ngcontent-%COMP%]{border-radius:5px;margin-top:3px}"]}),e})(),I=(()=>{class e{constructor(o,n){this.authsvc=o,this.productsvc=n,this.formProduct=new r.cw({})}ngOnInit(){this.formProduct=new r.cw({nombre:new r.NI("",[r.kI.required]),descripcion:new r.NI("",[r.kI.required]),codigo:new r.NI("",[r.kI.required]),foto:new r.NI("",[r.kI.required]),precio:new r.NI("",[r.kI.required]),stock:new r.NI("",[r.kI.required])})}addprodcut(){this.formProduct.get("nombre")?.errors?.required||this.formProduct.get("descripcion")?.errors?.required||this.formProduct.get("codigo")?.errors?.required||this.formProduct.get("foto")?.errors?.required||this.formProduct.get("precio")?.errors?.required||this.formProduct.get("stock")?.errors?.required?alert("Todos los campos deben estar completos"):this.authsvc.administrador?this.productsvc.addProduct(this.formProduct.value).subscribe({next:o=>console.log(o),error:o=>console.log(o)}):alert("Ten\xe9s que ser administrador para agregar productos")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(h.e),t.Y36(l))},e.\u0275cmp=t.Xpm({type:e,selectors:[["front-form"]],decls:8,vars:1,consts:[["action","",1,"d-flex","flex-column",3,"formGroup"],["formControlName","nombre","placeholder","Nombre del producto","type","text"],["formControlName","descripcion","placeholder","descricti\xf3n del producto","type","text"],["formControlName","codigo","placeholder","C\xf3digo del producto","type","number"],["formControlName","foto","placeholder","URL de la foto","type","text"],["formControlName","precio","placeholder","Precio","type","number"],["formControlName","stock","placeholder","Stock","type","number"],["type","submit",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0),t._UZ(1,"input",1)(2,"input",2)(3,"input",3)(4,"input",4)(5,"input",5)(6,"input",6),t.TgZ(7,"input",7),t.NdJ("click",function(){return n.addprodcut()}),t.qZA()()),2&o&&t.Q6J("formGroup",n.formProduct)},dependencies:[r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u],styles:["input[_ngcontent-%COMP%]{margin-top:4px;border-radius:5px}"]}),e})();function N(e,i){1&e&&(t.TgZ(0,"div"),t._uU(1,"Administrador"),t.qZA())}function F(e,i){1&e&&t._uU(0,"Usuario final")}function y(e,i){if(1&e&&t._UZ(0,"front-card",12),2&e){const o=i.$implicit,n=t.oxw();t.Q6J("infoProduct",o)("administrador",n.administrador)}}const q=[{path:"",component:(()=>{class e{constructor(o,n,c,p,m){this.auths=o,this.dataProductsSvs=n,this.router=c,this.loginService=p,this.guardservice=m,this.listOfProducts=[],this.userLoged=""}ngOnInit(){this.administrador=this.auths.administrador,this.userLoged=this.loginService.user,this.loadProducts(),this.loginService.checkSession().subscribe({next:o=>{400===o.status&&(this.guardservice.setterAccessFalse(),this.router.navigate(["auth/login"]))},error:o=>console.log(o)})}loadProducts(){this.dataProductsSvs.getProducts().subscribe({next:o=>{this.listOfProducts=o},error:o=>console.log(o)})}goCart(){this.router.navigate(["home/carrito"])}userSelect(){this.auths.administrador=!this.auths.administrador,this.administrador=this.auths.administrador}closeSession(){this.loginService.closeSession().subscribe({next:o=>{400===o.status&&(alert("Hasta luego "+this.userLoged),setTimeout(()=>{this.guardservice.setterAccessFalse(),this.router.navigate(["auth/login"])},2e3))},error:o=>console.log(o)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(h.e),t.Y36(l),t.Y36(a.F0),t.Y36(b.r),t.Y36(Z.a))},e.\u0275cmp=t.Xpm({type:e,selectors:[["front-home-page"]],decls:26,vars:4,consts:[[1,"container","mt-5"],[1,"container","d-flex"],[1,"btn","btn-danger","my-5",3,"click"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-primary","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"dropdown-divider"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container","mt-5","d-flex","flex-wrap"],[3,"infoProduct","administrador",4,"ngFor","ngForOf"],[3,"infoProduct","administrador"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return n.closeSession()}),t._uU(5,"Cerrrar sesi\xf3n"),t.qZA()(),t.TgZ(6,"div",3)(7,"button",4),t._uU(8," Tipo de usuario "),t.qZA(),t.TgZ(9,"ul",5)(10,"li")(11,"a",6),t.NdJ("click",function(){return n.userSelect()}),t._uU(12,"Usurario final"),t.qZA()(),t.TgZ(13,"li"),t._UZ(14,"hr",7),t.qZA(),t.TgZ(15,"li")(16,"a",6),t.NdJ("click",function(){return n.userSelect()}),t._uU(17,"Usuario administrador"),t.qZA()()()(),t.YNc(18,N,2,0,"div",8),t.YNc(19,F,1,0,"ng-template",null,9,t.W1O),t._UZ(21,"front-form"),t.TgZ(22,"button",2),t.NdJ("click",function(){return n.goCart()}),t._uU(23,"Ir al carrito"),t.qZA()(),t.TgZ(24,"div",10),t.YNc(25,y,1,2,"front-card",11),t.qZA()),2&o){const c=t.MAs(20);t.xp6(3),t.hij("Bienvenido ",n.userLoged,""),t.xp6(15),t.Q6J("ngIf",n.administrador)("ngIfElse",c),t.xp6(7),t.Q6J("ngForOf",n.listOfProducts)}},dependencies:[u.sg,u.O5,x,I]}),e})()},{path:"carrito",component:v}];let A=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.Bz.forChild(q),a.Bz]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[r.UX,u.ez,A]}),e})()}}]);