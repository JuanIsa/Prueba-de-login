"use strict";(self.webpackChunkdesafio_final_front=self.webpackChunkdesafio_final_front||[]).push([[287],{8287:(F,u,s)=>{s.r(u),s.d(u,{PublicAppModule:()=>b});var c=s(6895),l=s(6773),o=s(433),e=s(8256),g=s(1437),p=s(7316);let m=(()=>{class t{constructor(r,n,a){this.router=r,this.loginService=n,this.guardservice=a,this.loginForm=new o.cw({})}ngOnInit(){this.loginService.checkSession().subscribe({next:r=>{200===r.status&&(this.guardservice.setterAccessTrue(),this.router.navigate(["home"]),this.loginService.user=r.user.email)},error:r=>console.log(r)}),this.loginForm=new o.cw({email:new o.NI("",[o.kI.required]),password:new o.NI("",[o.kI.required])})}login(){this.loginForm.get("email")?.errors?.required||this.loginForm.get("password")?.errors?.required?alert("Ning\xfan campo puede estar vac\xedo."):this.loginService.loginUser(this.loginForm.value).subscribe({next:r=>{console.log(r),null!==r?(this.guardservice.setterAccessTrue(),this.router.navigate(["home"]),this.loginService.user=r):alert("Credenciales inv\xe1lidas.")},error:r=>console.log(r)})}goRegister(){this.router.navigate(["/auth/register"])}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(l.F0),e.Y36(g.r),e.Y36(p.a))},t.\u0275cmp=e.Xpm({type:t,selectors:[["front-login-page"]],decls:17,vars:1,consts:[[1,"container","mt-5","d-flex","justify-content-center","flex-column"],["action","submit",1,"d-flex","flex-column",3,"formGroup"],[1,"form-floating","mb-3"],["formControlName","email","type","email","id","floatingInput","placeholder","name@example.com","type","email","autocomplete","off",1,"form-control"],["for","floatingInput"],[1,"form-floating"],["formControlName","password","type","password","id","floatingPassword","placeholder","Password","type","password","autocomplete","off",1,"form-control"],["for","floatingPassword"],["type","submit",1,"btn","btn-primary","mt-3",3,"click"],["href","/users/github"],[1,"btn","btn-danger","my-5",3,"click"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"input",3),e.TgZ(4,"label",4),e._uU(5,"E-mail"),e.qZA()(),e.TgZ(6,"div",5),e._UZ(7,"input",6),e.TgZ(8,"label",7),e._uU(9,"Password"),e.qZA()(),e.TgZ(10,"input",8),e.NdJ("click",function(){return n.login()}),e.qZA()(),e.TgZ(11,"div")(12,"a",9),e._uU(13,"Loguearte con GITHUB"),e.qZA(),e._uU(14," \xbfTodav\xeda no ten\xe9s cuenta?, registrate: "),e.TgZ(15,"button",10),e.NdJ("click",function(){return n.goRegister()}),e._uU(16,"Ir al registro"),e.qZA()()()),2&r&&(e.xp6(1),e.Q6J("formGroup",n.loginForm))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]}),t})();var d=s(4766),f=s(529);let h=(()=>{class t{constructor(r){this.http=r}registerUser(r){return this.http.post(`${d.N.urlFetch}/users/register`,r)}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(f.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const v=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:m},{path:"register",component:(()=>{class t{constructor(r,n){this.router=r,this.registerService=n,this.registerForm=new o.cw({})}ngOnInit(){this.registerForm=new o.cw({email:new o.NI("",[o.kI.required]),password:new o.NI("",[o.kI.required]),repeatpassword:new o.NI("",[o.kI.required])})}register(){this.registerForm.get("email")?.errors?.required||this.registerForm.get("password")?.errors?.required||this.registerForm.get("repeatpassword")?.errors?.required?alert("Ning\xfan campo puede estar vac\xedo."):this.registerForm.value.password===this.registerForm.value.repeatpassword?this.registerService.registerUser({email:this.registerForm.value.email,password:this.registerForm.value.password}).subscribe({next:r=>{r.Error&&alert("Ya existe ese email en la base de datos"),r._id&&(alert(`Usuario creado con \xe9xito con el id: ${r._id}`),this.router.navigate(["/auth/login"]))},error:r=>alert("Ah ocurrido un error inesperado, intente nuevamente en unos instantes.")}):alert("Las contrase\xf1as deben coincidir")}goLogin(){this.router.navigate(["/auth/login"])}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(l.F0),e.Y36(h))},t.\u0275cmp=e.Xpm({type:t,selectors:[["front-register-page"]],decls:19,vars:1,consts:[[1,"container","mt-5","d-flex","justify-content-center","flex-column"],["action","submit",1,"d-flex","flex-column",3,"formGroup"],[1,"form-floating","mb-3"],["formControlName","email","type","email","id","floatingInput","placeholder","name@example.com","type","email","autocomplete","off",1,"form-control"],["for","floatingInput"],["formControlName","password","type","password","id","floatingPassword","placeholder","Password","type","password","autocomplete","off",1,"form-control"],["for","floatingPassword"],[1,"form-floating"],["formControlName","repeatpassword","type","password","id","floatingRepeatPassword","placeholder","Password","type","password","autocomplete","off",1,"form-control"],["for","floatingRepeatPassword"],["type","submit",1,"btn","btn-primary","mt-3",3,"click"],[1,"btn","btn-danger","my-5",3,"click"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"input",3),e.TgZ(4,"label",4),e._uU(5,"E-mail"),e.qZA()(),e.TgZ(6,"div",2),e._UZ(7,"input",5),e.TgZ(8,"label",6),e._uU(9,"Contrase\xf1a"),e.qZA()(),e.TgZ(10,"div",7),e._UZ(11,"input",8),e.TgZ(12,"label",9),e._uU(13,"Reingrese contrase\xf1a"),e.qZA()(),e.TgZ(14,"input",10),e.NdJ("click",function(){return n.register()}),e.qZA()(),e.TgZ(15,"div"),e._uU(16," \xbfYa ten\xe9s cuenta?, logueate: "),e.TgZ(17,"button",11),e.NdJ("click",function(){return n.goLogin()}),e._uU(18,"Ir al Login"),e.qZA()()()),2&r&&(e.xp6(1),e.Q6J("formGroup",n.registerForm))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(v),l.Bz]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,w,o.UX]}),t})()}}]);